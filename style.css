:root{
  --pink:#ff85c1; --pink2:#ffa2d4; --hot:#ff3c9e; --gray:#ccc;
  --jo:#ff85c1;      /* 평범한 아영 */
  --a:#7ecbff;       /* 귀여운 아영 */
  --yeong:#b38cff;   /* 사악한 아영 */
}
body{margin:0;font-family:'Pretendard','Noto Sans KR',sans-serif;background:#fffafc;color:#333;}

.topbar{display:flex;justify-content:space-between;align-items:center;background:#fff;padding:8px 14px;border-bottom:2px solid var(--pink2);}
.brand{display:flex;align-items:center;gap:8px;}
.player-avatar{width:40px;height:40px;border-radius:10px;border:2px solid var(--pink2);}
.controls button{background:var(--pink);color:#fff;border:none;border-radius:8px;padding:6px 10px;cursor:pointer;}
.controls button:hover{background:var(--pink2);}

.character-list{display:flex;justify-content:center;gap:48px;flex-wrap:wrap;margin-top:24px;}
/* 원형 → 사각형(살짝 둥근) & 캐릭터별 프레임 컬러 */
.character img{
  width:150px;height:150px;object-fit:cover;
  border-radius:12px;transition:transform .2s, box-shadow .2s;
  border:4px solid var(--pink2); box-shadow:0 4px 12px rgba(0,0,0,.08);
}
.character[data-id="jo"] img{ border-color: var(--jo); box-shadow:0 6px 16px rgba(255,133,193,.25); }
.character[data-id="a"] img{ border-color: var(--a); box-shadow:0 6px 16px rgba(126,203,255,.25); }
.character[data-id="yeong"] img{ border-color: var(--yeong); box-shadow:0 6px 16px rgba(179,140,255,.25); }
.character:hover img{ transform:scale(1.05); }
.character p{text-align:center;color:var(--pink);font-weight:700;}

.dialogue{
  position:fixed;bottom:24px;left:50%;transform:translateX(-50%);
  width:min(700px,94%);background:#fff;border:5px solid var(--pink2);
  border-radius:20px;padding:16px;box-shadow:0 12px 24px rgba(0,0,0,.12);
  transition:border .3s, box-shadow .3s;
}
.dialogue.low{border-color:var(--gray);}
.dialogue.mid{border-color:var(--pink2);}
.dialogue.high{border-color:var(--hot); box-shadow:0 0 0 3px rgba(255,60,158,.12), 0 16px 28px rgba(0,0,0,.14);}
.dialogue.hidden{display:none;}

/* 캐릭터별로 대화창 아바타 프레임 컬러 자동 변경 */
.dlg-avatar-wrap{text-align:center;}
.dlg-avatar-wrap img{
  width:100px;height:100px;object-fit:cover;
  border-radius:12px;border:4px solid var(--pink2);
  box-shadow:0 6px 16px rgba(0,0,0,.1);
}
/* body에 theme-xxx 클래스가 붙을 때 */
body.theme-jo .dlg-avatar-wrap img{ border-color: var(--jo); }
body.theme-a .dlg-avatar-wrap img{ border-color: var(--a); }
body.theme-yeong .dlg-avatar-wrap img{ border-color: var(--yeong); }

/* 총점 패널(하트 크게 & 굵게) */
.affection-panel{
  text-align:center;color:var(--hot);font-weight:900;
  margin-bottom:10px;font-size:28px;letter-spacing:.5px;
  text-shadow:0 1px 0 #fff, 0 3px 10px rgba(255,60,158,.2);
}

/* 대화 텍스트 크게/굵게 */
#dialogueText{
  min-height:72px;margin:12px 0;
  font-size:20px;font-weight:700;line-height:1.7;
}

/* 선택지: 가로, 크게/굵게 + 클릭 이모지 팡팡 */
.choice-container{display:flex;justify-content:center;gap:10px;flex-wrap:wrap;}
.choice{
  background:var(--pink);color:#fff;border:none;border-radius:12px;
  padding:12px 16px;cursor:pointer;font-size:18px;font-weight:800;
  position:relative;overflow:visible;transform:translateZ(0);
}
.choice:hover{ background:var(--pink2); transform: translateY(-2px); }
.choice:active{ transform: scale(0.98); }

/* 버튼 누르는 순간 이모지 */
.choice:active::after,
.choice:active::before{
  content:"💖";position:absolute;left:50%;top:0;transform:translate(-50%,-60%);
  animation:popHeart 600ms ease-out forwards;pointer-events:none;font-size:22px;
  filter:drop-shadow(0 4px 8px rgba(255,0,120,.25));
}
.choice:active::before{
  content:"✨";transform:translate(-10%,-70%) rotate(-8deg);
  animation-duration:700ms;
}
@keyframes popHeart{
  0%{opacity:0;transform:translate(-50%,-20%) scale(.8);}
  30%{opacity:1;transform:translate(-50%,-70%) scale(1.05);}
  100%{opacity:0;transform:translate(-50%,-120%) scale(.9);}
}

/* 호감도 변화 이모티콘 (+/-) */
.aff-pop{
  position:absolute;left:50%;bottom:120%;transform:translateX(-50%);
  font-size:26px;font-weight:900;opacity:0;pointer-events:none;
  animation:popAff 900ms ease-out forwards;text-shadow:0 2px 6px rgba(0,0,0,.15);
}
@keyframes popAff{
  0%{transform:translate(-50%,10%) scale(.7);opacity:0;}
  20%{transform:translate(-50%,-20%) scale(1.1);opacity:1;}
  100%{transform:translate(-50%,-120%) scale(1);opacity:0;}
}

/* 엔딩 */
.ending{position:fixed;inset:0;background:rgba(255,255,255,.95);display:flex;align-items:center;justify-content:center;z-index:999;}
.ending.hidden{display:none;}
.ending-card{text-align:center;background:#fff;border:3px solid var(--pink2);border-radius:20px;padding:20px;box-shadow:0 8px 18px rgba(0,0,0,.1);}
.ending-card img{width:240px;height:auto;border-radius:12px;margin-bottom:12px;}
#btnRestart{background:var(--pink);color:#fff;border:none;border-radius:10px;padding:10px 16px;cursor:pointer;}
#btnRestart:hover{background:var(--pink2);}

border-radius: 10px;
box-shadow: 0 4px 12px rgba(255,133,193,.3);